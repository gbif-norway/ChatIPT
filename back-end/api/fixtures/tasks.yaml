- model: api.task
  fields:
    name: flatten_header
    description: Flatten any header rows
    initial_user_message: Do you think any of the top rows are also header rows? I.e. should any additional top rows be merged into the header? If so then merge them otherwise proceed to the next task
    initial_assistant_message: In order to publish the data, we need one single header row. I think you may have additional rows which need to be headers, which I have tried to fix. How does this look?
    functions: [ProceedToNextTask, MergeTopRowsIntoHeader]
- model: api.task
  fields:
    name: translate
    description: Translate any non-English columns into English
    initial_user_message: Do you think any of these columns are not in English? If so then translate them, otherwise proceed to the next task.
    initial_assistant_message: I think some of your dataset may not be in English. Before we proceed further we need to translate it. I have translated {input}. Does this look ok?
    functions: [ProceedToNextTask, TranslateNonEnglishColumns]
- model: api.task
  fields:
    name: drop
    description: Drop any columns or rows which you think are superfluous/unnecessary or meaningless
    initial_user_message: Do you think any of these columns are unnecessary? If so then drop them, otherwise proceed to the next task.
    initial_assistant_message: I think your dataset contains unnecessary data, so I have tried removing it. Does this look ok?
    functions: [ProceedToNextTask, DropColumnsRows]
# - model: api.task
#   fields:
#     name: uncrosstab
#     system_prompt: If this dataframe is in crosstab format, unpivot/de-crosstab it
#     initial_assistant_message: Your dataset appears to be in crosstab format. We need to split it into list format. I've had a stab at it - do the columns and rows look sensible here?
#     functions: [Uncrosstab]
# - model: api.task
#   fields:
#     name: join_columns_rows
#     system_prompt: Join any columns which look as if they should logically be merged
#     initial_assistant_message: Some of the columns in your dataset seem as if they should be joined. What do you think?
#     functions: [JoinColumnsRows]
# - model: api.task
#   fields:
#     name: split_columns_rows
#     system_prompt: Split any single columns which contain multiple values
#     initial_assistant_message: Some of the columns in your dataset seem as if they should be split. When publishing data, it's sometimes better to publish columns as the smallest possible component part - the exception is for dates. What do you think of the splits I've made?
#     functions: [SplitColumnsRows]
# - model: api.task
#   fields:
#     name: map
#     system_prompt: Rename column headers to Darwin Core Standard terms
#     initial_assistant_message: When publishing to gbif.org, we need to publish data in the Darwin Core standard, so that everyone understands what data columns contain. This means we have to convert some of your column header names, which I've attempted to do here. What do you think?
#     functions: [MapToDarwinCore]
# - model: api.task
#   fields:
#     name: fix_dates
#     system_prompt: Write code to fix any problems with date formatting, etc
#     initial_assistant_message: I've had a go at fixing some date formatting issues, how does this look?
#     functions: [FixDates]
# - model: api.task
#   fields:
#     name: add_basis_of_record
#     system_prompt: 'Create an appropriate darwin core standard "basisOfRecord" column, possible values are: x, y'
#     initial_assistant_message: A required field in the Darwin Core standard is 'basisOfRecord', which your dataset is missing. Possible values are x, y. I think your data is x because of x. What do you think?
#     functions: [AddBasisOfRecord]